#include "surface.h"
#include "font.h"
#include "lcd.h"
#include "sprite.h"
#include "types.h"

//font is 7x7, from ascii code 32 to 126 (inclusive)


void font_print (Surface *surface, char *text, uint16_t x, uint16_t y, uint16_t colour) {
    uint8_t font_size = 7 * 7, px = 0, py = 0;
    for (uint8_t i = 0, l = strlen(text); i < l; i++) {
        uint8_t code = (text[i] >= 32 ? text[i] - 32 : '?');
        if (code < 0 || code >= 126 - 32) continue;
        uint16_t idx = font_size * code;
        px = i * 8;
        py = 0;
        for (uint16_t offset = 0; offset < font_size; offset++) {
            char pixel = font_7x7[idx + offset];
            if (pixel == '#' 
             && x + px < LCD_WIDTH 
             && y + py < LCD_HEIGHT) {
                surface_putpixel(surface, x + px, y + py, colour);
            }
            if (offset % 7 == 6) {
                py++;
                px = i * 8;
            } else {
                px++;
            }
        }
    }
}


const char font_7x7[] = "" \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    \
    "#      " \
    "#      " \
    "#      " \
    "#      " \
    "#      " \
    "       " \
    "#      " \
    \
    " ## ## " \
    "  #  # " \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    \
    "       " \
    "  # #  " \
    " ##### " \
    "  # #  " \
    " ##### " \
    "  # #  " \
    "       " \
    \
    "  # #  " \
    " ######" \
    "# # #  " \
    " ##### " \
    "  # # #" \
    "###### " \
    "  # #  " \
    \
    "##    #" \
    "##   # " \
    "    #  " \
    "   #   " \
    "  #    " \
    " #   ##" \
    "#    ##" \
    \
    "       " \
    "   ##  " \
    "  #  # " \
    " ##### " \
    "# #  # " \
    "#  ### " \
    " ### ##" \
    \
    "  ##   " \
    "   #   " \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    \
    "      #" \
    "     # " \
    "    #  " \
    "    #  " \
    "    #  " \
    "     # " \
    "      #" \
    \
    "#      " \
    " #     " \
    "  #    " \
    "  #    " \
    "  #    " \
    " #     " \
    "#      " \
    \
    " # # # " \
    "  ###  " \
    " # # # " \
    "       " \
    "       " \
    "       " \
    "       " \
    \
    "       " \
    "   #   " \
    "   #   " \
    " ##### " \
    "   #   " \
    "   #   " \
    "       " \
    \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    "##     " \
    " #     " \
    \
    "       " \
    "       " \
    "       " \
    " ##### " \
    "       " \
    "       " \
    "       " \
    \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    "##     " \
    "##     " \
    \
    "      #" \
    "     # " \
    "    #  " \
    "   #   " \
    "  #    " \
    " #     " \
    "#      " \
    \
    " ##### " \
    "#     #" \
    "#  #  #" \
    "#  #  #" \
    "#  #  #" \
    "#     #" \
    " ##### " \
    \
    "   #   " \
    "  ##   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "  ###  " \
    \
    " ##### " \
    "#     #" \
    "      #" \
    "   ### " \
    " ##    " \
    "#      " \
    "#######" \
    \
    " ##### " \
    "#     #" \
    "      #" \
    "    ## " \
    "      #" \
    "#     #" \
    " ##### " \
    \
    "#      " \
    "#      " \
    "#   #  " \
    "#   #  " \
    " ######" \
    "    #  " \
    "    #  " \
    \
    "#######" \
    "#      " \
    "###### " \
    "      #" \
    "      #" \
    "#     #" \
    " ##### " \
    \
    " ##### " \
    "#     #" \
    "#      " \
    "###### " \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "#######" \
    "      #" \
    "     # " \
    "    #  " \
    "    #  " \
    "    #  " \
    "    #  " \
    \
    " ##### " \
    "#     #" \
    " ##### " \
    "#     #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    " ##### " \
    "#     #" \
    "#     #" \
    " ######" \
    "      #" \
    "#     #" \
    " ##### " \
    \
    "       " \
    "#      " \
    "#      " \
    "       " \
    "#      " \
    "#      " \
    "       " \
    \
    "       " \
    " #     " \
    " #     " \
    "       " \
    " #     " \
    "#      " \
    "       " \
    \
    "      #" \
    "     # " \
    "    #  " \
    "   #   " \
    "    #  " \
    "     # " \
    "      #" \
    \
    "       " \
    "       " \
    " ##### " \
    "       " \
    " ##### " \
    "       " \
    "       " \
    \
    "#      " \
    " #     " \
    "  #    " \
    "   #   " \
    "  #    " \
    " #     " \
    "#      " \
    \
    " ###   " \
    "#   #  " \
    "#   #  " \
    "  ##   " \
    "  #    " \
    "       " \
    "  #    " \
    \
    " ##### " \
    "#     #" \
    "#  ## #" \
    "# #   #" \
    "#  ### " \
    "#      " \
    " ##### " \
    \
    " ##### " \
    "#     #" \
    "#     #" \
    "#######" \
    "#     #" \
    "#     #" \
    "#     #" \
    \
    "###### " \
    "#     #" \
    "#     #" \
    "###### " \
    "#     #" \
    "#     #" \
    "###### " \
    \
    " ##### " \
    "#     #" \
    "#      " \
    "#      " \
    "#      " \
    "#     #" \
    " ##### " \
    \
    "#####  " \
    "#    # " \
    "#     #" \
    "#     #" \
    "#     #" \
    "#    # " \
    "#####  " \
    \
    "#######" \
    "#      " \
    "#      " \
    "#####  " \
    "#      " \
    "#      " \
    "#######" \
    \
    "#######" \
    "#      " \
    "#      " \
    "#####  " \
    "#      " \
    "#      " \
    "#      " \
    \
    " ##### " \
    "#     #" \
    "#      " \
    "#      " \
    "#   ###" \
    "#     #" \
    " ##### " \
    \
    "#     #" \
    "#     #" \
    "#     #" \
    "#######" \
    "#     #" \
    "#     #" \
    "#     #" \
    \
    "#######" \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "#######" \
    \
    "     ##" \
    "      #" \
    "      #" \
    "      #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "#     #" \
    "#    # " \
    "#  ##  " \
    "###    " \
    "#  ##  " \
    "#    # " \
    "#     #" \
    \
    "#      " \
    "#      " \
    "#      " \
    "#      " \
    "#      " \
    "#      " \
    "#######" \
    \
    "#     #" \
    "##   ##" \
    "# # # #" \
    "#  #  #" \
    "#     #" \
    "#     #" \
    "#     #" \
    \
    "#     #" \
    "##    #" \
    "# #   #" \
    "#  #  #" \
    "#   # #" \
    "#    ##" \
    "#     #" \
    \
    " ##### " \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "###### " \
    "#     #" \
    "#     #" \
    "###### " \
    "#      " \
    "#      " \
    "#      " \
    \
    " ##### " \
    "#     #" \
    "#     #" \
    "#     #" \
    "#   # #" \
    "#    # " \
    " #### #" \
    \
    "###### " \
    "#     #" \
    "#     #" \
    "###### " \
    "#   #  " \
    "#    # " \
    "#     #" \
    \
    " ######" \
    "#      " \
    "#      " \
    " ##### " \
    "      #" \
    "      #" \
    "###### " \
    \
    "#######" \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    " #   # " \
    "  # #  " \
    "   #   " \
    \
    "#     #" \
    "#     #" \
    "#     #" \
    "#  #  #" \
    "#  #  #" \
    "#  #  #" \
    " ## ## " \
    \
    "#     #" \
    "#     #" \
    " #   # " \
    "  ###  " \
    " #   # " \
    "#     #" \
    "#     #" \
    \
    "#     #" \
    "#     #" \
    "#     #" \
    " ######" \
    "      #" \
    "#     #" \
    " ##### " \
    \
    "#######" \
    "     # " \
    "    #  " \
    "   #   " \
    "  #    " \
    " #     " \
    "#######" \
    \
    "  ###  " \
    "  #    " \
    "  #    " \
    "  #    " \
    "  #    " \
    "  #    " \
    "  ###  " \
    \
    "#      " \
    " #     " \
    "  #    " \
    "   #   " \
    "    #  " \
    "     # " \
    "      #" \
    \
    "  ###  " \
    "    #  " \
    "    #  " \
    "    #  " \
    "    #  " \
    "    #  " \
    "  ###  " \
    \
    "   #   " \
    "  # #  " \
    " #   # " \
    "       " \
    "       " \
    "       " \
    "       " \
    \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    "#######" \
    \
    "  ##   " \
    "   ##  " \
    "       " \
    "       " \
    "       " \
    "       " \
    "       " \
    \
    "       " \
    " ##### " \
    "      #" \
    " ######" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "#      " \
    "#      " \
    "###### " \
    "#     #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "       " \
    "       " \
    " ##### " \
    "#     #" \
    "#      " \
    "#     #" \
    " ##### " \
    \
    "      #" \
    "      #" \
    " ######" \
    "#     #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "       " \
    "       " \
    " ##### " \
    "#     #" \
    "###### " \
    "#      " \
    " ######" \
    \
    "    ## " \
    "   #  #" \
    "   #   " \
    "  ###  " \
    "   #   " \
    "   #   " \
    "###    " \
    \
    "       " \
    " ##### " \
    "#     #" \
    " ##### " \
    "      #" \
    "#     #" \
    " ##### " \
    \
    "#      " \
    "#      " \
    "###### " \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    \
    "       " \
    "   ##  " \
    "       " \
    "  #### " \
    "   #   " \
    "   #   " \
    " ####  " \
    \
    "       " \
    "     ##" \
    "       " \
    "    ###" \
    "      #" \
    "#     #" \
    " ##### " \
    \
    "#      " \
    "#   ## " \
    "#  #   " \
    "###    " \
    "#  ### " \
    "#     #" \
    "#     #" \
    \
    " ##    " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "    ## " \
    \
    "       " \
    "       " \
    " ## ## " \
    "#  #  #" \
    "#  #  #" \
    "#     #" \
    "#     #" \
    \
    "       " \
    "       " \
    "# #### " \
    "##    #" \
    "#     #" \
    "#     #" \
    "#     #" \
    \
    "       " \
    "       " \
    " ##### " \
    "#     #" \
    "#     #" \
    "#     #" \
    " ##### " \
    \
    "       " \
    "       " \
    "###### " \
    "#     #" \
    "###### " \
    "#      " \
    "#      " \
    \
    "       " \
    "       " \
    " ##### " \
    "#    # " \
    " ##### " \
    "     # " \
    "     ##" \
    \
    "       " \
    "       " \
    " ##### " \
    "#     #" \
    "#      " \
    "#      " \
    "#      " \
    \
    "       " \
    "       " \
    " ######" \
    "#      " \
    " ##### " \
    "      #" \
    "###### " \
    \
    "       " \
    "#      " \
    "####   " \
    "#      " \
    "#      " \
    "#     #" \
    " ##### " \
    \
    "       " \
    "       " \
    "#     #" \
    "#     #" \
    "#     #" \
    "#     #" \
    " ######" \
    \
    "       " \
    "       " \
    "#     #" \
    "#     #" \
    " #   # " \
    "  # #  " \
    "   #   " \
    \
    "       " \
    "       " \
    "#     #" \
    "#     #" \
    "#  #  #"
    " # # # " \
    "  # #  " \
    \
    "       " \
    "       " \
    "#     #" \
    " #   # " \
    "  ###  " \
    " #   # " \
    "#     #" \
    \
    "       " \
    "       " \
    "#     #" \
    "#     #" \
    " ######" \
    "      #" \
    " ##### " \
    \
    "       " \
    "       " \
    "#######" \
    "     # " \
    "  ###  " \
    " #     " \
    "#######" \
    \
    "    ## " \
    "   #   " \
    "   #   " \
    "  #    " \
    "   #   " \
    "   #   " \
    "    ## " \
    \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    "   #   " \
    \
    " ##    " \
    "   #   " \
    "   #   " \
    "    #  " \
    "   #   " \
    "   #   " \
    " ##    " \
    \
    "       " \
    " ##   #" \
    "#  ### " \
    "       " \
    "       " \
    "       " \
    "       " \
    "";

